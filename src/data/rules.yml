version: "3.1"
# specific constraint

rules:

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot

- rule: Say the bot goal anytime the user asks
  steps:
  - intent: bot_goal
  - action: utter_bot_goal

- rule: I am not looking for a job nor a candidate
  steps:
  - intent: im_not_looking_for_job_nor_for_candidate
  # - action: utter_bot_goal
  # - action: utter_help
  # - action: utter_ask_want_stop_conversation
  - action: utter_bot_goal_help_ask_want_stop_conversation

- rule: Is the candidate a good fit?
  steps:
  - intent: ask_to_know_more_about_candidate
  - action: action_provide_candidate_profile_details_llm
  # the action action_provide_candidate_profile_details_llm
  # will provides also these two actions
  # - action: utter_which_candidate_confirmation
  # - action: utter_confirmation_candidate_found
 
- rule: Is the job a good fit?
  steps:
  - intent: ask_to_know_more_about_job
  - action: action_provide_job_profile_details_llm
  # the action action_provide_job_profile_details_llm
  # will provides also these two actions
  # - action: utter_which_job_confirmation
  # - action: utter_confirmation_job_found

### Activate looking for candidate FORM ###

# activate the looking for candidate form
# when the intent looking_for_candidate is 
# detected
# - rule: Activate looking for candidate FORM
#   steps:
#   - intent: looking_for_candidate
#   - action: looking_for_candidate_form
#   - active_loop: looking_for_candidate_form

# # deactivate the looking for candidate form
# # when the user ask that he/she is not looking
# # for a candidate
- rule: Deactivate looking for candidate FORM (looking for something else)
  condition:
  - active_loop: looking_for_candidate_form
  steps:
  - intent: looking_for_something_else
  - action: looking_for_candidate_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  # - action: utter_help
  # - action: utter_ask_want_stop_conversation
  - action: utter_help_ask_want_stop_conversation

- rule: Deactivate looking for candidate FORM
  condition:
  - active_loop: looking_for_candidate_form
  steps:
  - intent: im_not_looking_for_job_nor_for_candidate
  - action: looking_for_candidate_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null


# # deactivate the looking for candidate form
# # when the user provided all the required slots
- rule: Deactivate looking for candidate FORM 1
  condition:
  - active_loop: looking_for_candidate_form
  steps:
  - action: looking_for_candidate_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_ask_candidate_characteristics
  - intent: candidate_role
  # - action: action_provide_candidate_profile
  - action: action_search_candidates
  # The action action_search_candidates will provide also these actions
  # - action: utter_which_candidate_confirmation


# # handle interruption 1 in looking for candidate FORM
# # when the ask if the user ask to the system if it is
# # a bot
- rule: Handle interruption 1 in looking for candidate FORM
  condition:
  - active_loop: looking_for_candidate_form
  steps:
  - intent: bot_challenge
  - action: utter_iamabot
  - action: looking_for_candidate_form
  - active_loop: looking_for_candidate_form

# # handle interruption 2 in looking for candidate FORM
# # when the user ask which is the goal of the bot
- rule: Handle interruption 2 in looking for candidate FORM
  condition:
  - active_loop: looking_for_candidate_form
  steps:
  - intent: bot_goal
  - action: utter_bot_goal
  - action: looking_for_candidate_form
  - active_loop: looking_for_candidate_form

- rule: Deactivate looking for job
  condition:
  - active_loop: looking_for_job_form
  steps:
  - action: looking_for_job_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_ask_job_characteristics
  - intent: job_description
  - action: action_search_jobs
  # - action: utter_which_jobs_confirmation






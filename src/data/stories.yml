version: "3.1"
# exaple of a conversation

stories:

############ Looking for a job ############


# The manager initiates the conversation 
# announcing a new job opening and specifies 
# the key requirements for the position

- story: Intro looking for candidates
  steps:
  - intent: greet
  - action: utter_greet
  - action: utter_help
  - checkpoint: looking_for_candidate

## in place or remote

- story: Intro looking for candidates in place
  steps:
  - checkpoint: looking_for_candidate
  - action: utter_ask_inplace_or_remote
  - intent: confirm_in_place
  - slot_was_set:
    - in_place_or_remote: in_place
  - checkpoint: utter_ask_candidate_education_level

- story: Intro looking for candidates remote 1.1 
  steps:
  - checkpoint: looking_for_candidate
  - action: utter_ask_inplace_or_remote
  - intent: confirm_remote
  - slot_was_set:
    - in_place_or_remote: remote
  - action: utter_ask_relocation
  - intent: confirm_relocation
  - slot_was_set:
    - relocation: yes
  - checkpoint: utter_ask_candidate_education_level

- story: Intro looking for candidates remote 1.2
  steps:
  - checkpoint: looking_for_candidate
  - action: utter_ask_inplace_or_remote
  - intent: confirm_remote
  - slot_was_set:
    - in_place_or_remote: remote
  - action: utter_ask_relocation
  - intent: deny_relocation
  - slot_was_set:
    - relocation: no
  - checkpoint: utter_ask_candidate_education_level

- story: Handle go back to utter_ask_inplace_or_remote 1.1
  steps:
  - checkpoint: utter_ask_candidate_education_level
  - intent: go_back_to_in_place_or_remote
  - action: utter_random_sorry
  - action: utter_ask_inplace_or_remote
  - intent: confirm_remote
  - slot_was_set:
    - in_place_or_remote: remote
  - action: utter_ask_relocation
  - intent: deny_relocation
  - slot_was_set:
    - relocation: no
  - checkpoint: utter_ask_candidate_education_level

- story: Handle go back to utter_ask_inplace_or_remote 1.2
  steps:
  - checkpoint: utter_ask_candidate_education_level
  - intent: go_back_to_in_place_or_remote
  - action: utter_random_sorry
  - action: utter_ask_inplace_or_remote
  - intent: confirm_remote
  - slot_was_set:
    - in_place_or_remote: remote
  - action: utter_ask_relocation
  - intent: confirm_relocation
  - slot_was_set:
    - relocation: yes
  - checkpoint: utter_ask_candidate_education_level


- story: Handle go back to utter_ask_inplace_or_remote 2
  steps:
  - checkpoint: utter_ask_candidate_education_level
  - intent: go_back_to_in_place_or_remote
  - action: utter_random_sorry
  - action: utter_ask_inplace_or_remote
  - intent: confirm_in_place
  - slot_was_set:
    - in_place_or_remote: in_place
  - checkpoint: utter_ask_candidate_education_level



## education level

- story: Looking for a candidate level of education phd
  steps:
  - checkpoint: utter_ask_candidate_education_level
  - intent: confirm_candidate_education_level_phd
  - slot_was_set:
    - candidate_education: phd
  - checkpoint: utter_ask_candidate_salary

- story: Looking for a candidate level of education masters
  steps:
  - checkpoint: utter_ask_candidate_education_level
  - intent: confirm_candidate_education_level_masters
  - slot_was_set:
    - candidate_education: masters
  - checkpoint: utter_ask_candidate_salary

- story: Looking for a candidate level of education bachelors
  steps:
  - checkpoint: utter_ask_candidate_education_level
  - intent: confirm_candidate_education_level_bachelors
  - slot_was_set:
    - candidate_education: bachelors
  - checkpoint: utter_ask_candidate_salary

- story: Looking for a candidate level of education diploma
  steps:
  - checkpoint: utter_ask_candidate_education_level
  - intent: confirm_candidate_education_level_diploma
  - slot_was_set:
    - candidate_education: diploma
  - checkpoint: utter_ask_candidate_salary

- story: Handle go back to utter_ask_candidate_education_level phd
  steps:
  - checkpoint: utter_ask_candidate_salary
  - intent: go_back_to_candidate_education_level
  - action: utter_random_sorry
  - action: utter_ask_candidate_education_level
  - intent: confirm_candidate_education_level_phd
  - slot_was_set:
    - candidate_education: phd
  - checkpoint: utter_ask_candidate_salary

- story: Handle go back to utter_ask_candidate_education_level masters
  steps:
  - checkpoint: utter_ask_candidate_salary
  - intent: go_back_to_candidate_education_level
  - action: utter_random_sorry
  - action: utter_ask_candidate_education_level
  - intent: confirm_candidate_education_level_masters
  - slot_was_set:
    - candidate_education: masters
  - checkpoint: utter_ask_candidate_salary

- story: Handle go back to utter_ask_candidate_education_level bachelors
  steps:
  - checkpoint: utter_ask_candidate_salary
  - intent: go_back_to_candidate_education_level
  - action: utter_random_sorry
  - action: utter_ask_candidate_education_level
  - intent: confirm_candidate_education_level_bachelors
  - slot_was_set:
    - candidate_education: bachelors
  - checkpoint: utter_ask_candidate_salary

- story: Handle go back to utter_ask_candidate_education_level diploma
  steps:
  - checkpoint: utter_ask_candidate_salary
  - intent: go_back_to_candidate_education_level
  - action: utter_random_sorry
  - action: utter_ask_candidate_education_level
  - intent: confirm_candidate_education_level_diploma
  - slot_was_set:
    - candidate_education: diploma
  - checkpoint: utter_ask_candidate_salary


## salary

- story: Looking for a candidate salary
  steps:
  - checkpoint: utter_ask_candidate_salary
  - intent: confirm_candidate_salary
  - checkpoint: utter_ask_candidate_type_position

- story: Handle go back to utter_ask_candidate_salary
  steps:
  - checkpoint: utter_ask_candidate_type_position 
  - intent: go_back_to_candidate_salary
  - action: utter_random_sorry
  - action: utter_ask_candidate_salary
  - intent: confirm_candidate_salary
  - checkpoint: utter_ask_candidate_type_position

## type of position

- story: Looking for a candidate type of position full time
  steps:
  - checkpoint: utter_ask_candidate_type_position
  - intent: confirm_candidate_type_position_full_time
  - slot_was_set:
    - candidate_type_position: full_time
  - checkpoint: utter_ask_level_of_experience

- story: Looking for a candidate type of position part time
  steps:
  - checkpoint: utter_ask_candidate_type_position
  - intent: confirm_candidate_type_position_part_time
  - slot_was_set:
    - candidate_type_position: part_time
  - checkpoint: utter_ask_level_of_experience

- story: Looking for a candidate type of position internship
  steps:
  - checkpoint: utter_ask_candidate_type_position
  - intent: confirm_candidate_type_position_internship
  - slot_was_set:
    - candidate_type_position: internship
  - checkpoint: utter_ask_level_of_experience

- story: Handle go back to utter_ask_candidate_type_position full time
  steps:
  - checkpoint: utter_ask_level_of_experience
  - intent: go_back_to_candidate_type_position
  - action: utter_random_sorry
  - action: utter_ask_candidate_type_position
  - intent: confirm_candidate_type_position_full_time
  - slot_was_set:
    - candidate_type_position: full_time
  - checkpoint: utter_ask_level_of_experience

- story: Handle go back to utter_ask_candidate_type_position part time
  steps:
  - checkpoint: utter_ask_level_of_experience
  - intent: go_back_to_candidate_type_position
  - action: utter_random_sorry
  - action: utter_ask_candidate_type_position
  - intent: confirm_candidate_type_position_part_time
  - slot_was_set:
    - candidate_type_position: part_time
  - checkpoint: utter_ask_level_of_experience

- story: Handle go back to utter_ask_candidate_type_position internship
  steps:
  - checkpoint: utter_ask_level_of_experience
  - intent: go_back_to_candidate_type_position
  - action: utter_random_sorry
  - action: utter_ask_candidate_type_position
  - intent: confirm_candidate_type_position_internship
  - slot_was_set:
    - candidate_type_position: internship
  - checkpoint: utter_ask_level_of_experience

## level of experience

- story: Looking for a candidate level of experience junior
  steps:
  - checkpoint: utter_ask_level_of_experience
  - intent: confirm_level_of_experience_junior
  - slot_was_set:
    - candidate_experience: junior
  - checkpoint: utter_ask_candidate_characteristics

- story: Looking for a candidate level of experience senior
  steps:
  - checkpoint: utter_ask_level_of_experience
  - intent: confirm_level_of_experience_senior
  - slot_was_set:
    - candidate_experience: senior
  - checkpoint: utter_ask_candidate_characteristics

- story: Looking for a candidate level of experience expert
  steps:
  - checkpoint: utter_ask_level_of_experience
  - intent: confirm_level_of_experience_expert
  - slot_was_set:
    - candidate_experience: expert
  - checkpoint: utter_ask_candidate_characteristics


- story: Handle go back to utter_ask_level_of_experience junior
  steps:
  - checkpoint: utter_ask_candidate_characteristics
  - intent: go_back_to_level_of_experience
  - action: utter_random_sorry
  - action: utter_ask_level_of_experience
  - intent: confirm_level_of_experience_junior
  - slot_was_set:
    - candidate_experience: junior
  - checkpoint: utter_ask_candidate_characteristics

- story: Handle go back to utter_ask_level_of_experience senior
  steps:
  - checkpoint: utter_ask_candidate_characteristics
  - intent: go_back_to_level_of_experience
  - action: utter_random_sorry
  - action: utter_ask_level_of_experience
  - intent: confirm_level_of_experience_senior
  - slot_was_set:
    - candidate_experience: senior
  - checkpoint: utter_ask_candidate_characteristics

- story: Handle go back to utter_ask_level_of_experience expert
  steps:
  - checkpoint: utter_ask_candidate_characteristics
  - intent: go_back_to_level_of_experience
  - action: utter_random_sorry
  - action: utter_ask_level_of_experience
  - intent: confirm_level_of_experience_expert
  - slot_was_set:
    - candidate_experience: expert
  - checkpoint: utter_ask_candidate_characteristics

## candidate characteristics

- story: Looking for a candidate characteristics
  steps:
  - checkpoint: utter_ask_candidate_characteristics
  - intent: candidate_role
  - action: utter_confirmation_searching_for_candidate
  - action: utter_random_confirmation
  - checkpoint: action_provide_candidate_profile

- story: Handle go back to utter_ask_candidate_characteristics
  steps:
  - checkpoint: action_provide_candidate_profile
  - intent: go_back_to_candidate_characteristics
  - action: utter_random_sorry
  - action: utter_ask_candidate_characteristics
  - intent: candidate_role
  - action: utter_confirmation_searching_for_candidate
  - action: utter_random_confirmation
  - checkpoint: action_provide_candidate_profile

## candidate profile characteristics

- story: Looking for a candidate profile characteristics
  steps:
  - checkpoint: action_provide_candidate_profile
  - intent: ask_to_know_more_about_candidate
  - action: action_provide_candidate_profile_details_llm
  - checkpoint: utter_ask_candidate_characteristics

- story: Handle repeat utter_ask_candidate_characteristics
  steps:
  - checkpoint: utter_ask_candidate_characteristics
  - intent: ask_to_know_more_about_candidate
  - action: action_provide_candidate_profile_details_llm
  - checkpoint: utter_ask_candidate_characteristics

## confirmation

- story: Looking for a candidate confirmation 1
  steps:
  - checkpoint: utter_ask_candidate_characteristics
  - intent: confirm_candidate
  - action: utter_random_confirmation_2
  - action: utter_ask_need_something_else
  - checkpoint: utter_ask_want_stop_conversation

- story: Looking for a candidate confirmation 2
  steps:
  - checkpoint: utter_ask_candidate_characteristics
  - intent: confirm_candidate_reachout
  - action: utter_confirm_candidate_reachout
  - action: utter_ask_need_something_else
  - checkpoint: utter_ask_want_stop_conversation


### Here there are two cases:

# Stop the conversation
- story: Stop the conversation affirm
  steps:
  - checkpoint: utter_ask_want_stop_conversation
  - intent: affirm
  # markers
  - action: utter_help
  - intent: affirm
  - action: utter_goodbye

- story: Stop the conversation deny
  steps:
  - checkpoint: utter_ask_want_stop_conversation
  - intent: affirm
  # markers
  - action: utter_help
  - intent: deny
  - action: utter_goodbye

# Continue the conversation

- story: Continue the conversation
  steps:
  - checkpoint: utter_ask_want_stop_conversation
  - intent: deny
  - action: utter_help
  - checkpoint: looking_for_candidate

- story: Continue the conversation
  steps:
  - checkpoint: utter_ask_want_stop_conversation
  - intent: deny
  - action: utter_help
  - checkpoint: looking_for_job



#   - intent: confirm_candidate_salary
#   - action: utter_ask_candidate_type_position
#   - or: 
#     - intent: confirm_candidate_type_position_full_time
#     - slot_was_set:
#       - candidate_type_position: full_time
#     - intent: confirm_candidate_type_position_part_time
#     - slot_was_set:
#       - candidate_type_position: part_time
#     - intent: confirm_candidate_type_position_internship
#     - slot_was_set:
#       - candidate_type_position: internship
#   - action: utter_ask_level_of_experience
#   - or:
#     - intent: confirm_level_of_experience_junior
#     - slot_was_set:
#       - candidate_experience: junior
#     - intent: confirm_level_of_experience_senior
#     - slot_was_set:
#       - candidate_experience: senior
#     - intent: confirm_level_of_experience_expert
#     - slot_was_set:
#       - candidate_experience: expert
#   - action: utter_ask_candidate_characteristics
#   - intent: candidate_role 
#   - action: utter_confirmation_searching_for_candidate
#   - action: utter_random_confirmation 
#   - action: action_provide_candidate_profile
#   - action: utter_ask_job_characteristics
#   - intent: ask_candidate_characteristics
#   - action: action_provide_candidate_profile_details_llm
#   - action: utter_ask_candidate_characteristics
#   - or:
#     - intent: confirm_candidate
#     - intent: confirm_candidate_reachout
#   - action: utter_random_confirmation
#   - action: utter_help
#   - or:
#     - intent: affirm
#     - intent: deny
#   - action: utter_goodbye_candidate

# - story: Looking for a candidate dialogue type 1
#   steps:
#   - intent: greet
#   - action: utter_greet
#   - action: utter_help
#   - intent: looking_for_candidate
# ## when in place we do not need to ask for relocation
#   - action: utter_ask_inplace_or_remote
#   - intent: confirm_remote
#   - slot_was_set:
#     - in_place_or_remote: remote
#   - action: utter_ask_relocation
#   - or:
#     - intent: confirm_relocation
#     - slot_was_set:
#       - relocation: yes
#     - intent: deny_relocation
#     - slot_was_set:
#       - relocation: no
#   - action: utter_ask_candidate_education_level
#   - or:
#     - intent: confirm_candidate_education_level_phd
#     - intent: confirm_candidate_education_level_masters
#     - intent: confirm_candidate_education_level_bachelors
#     - intent: confirm_candidate_education_level_diploma
#   - action: utter_ask_candidate_salary
#   - intent: confirm_candidate_salary
#   - action: utter_ask_candidate_type_position
#   - or: 
#     - intent: confirm_candidate_type_position_full_time
#     - slot_was_set:
#       - candidate_type_position: full_time
#     - intent: confirm_candidate_type_position_part_time
#     - slot_was_set:
#       - candidate_type_position: part_time
#     - intent: confirm_candidate_type_position_internship
#     - slot_was_set:
#       - candidate_type_position: internship
#   - action: utter_ask_level_of_experience
#   - or:
#     - intent: confirm_level_of_experience_junior
#     - slot_was_set:
#       - candidate_experience: junior
#     - intent: confirm_level_of_experience_senior
#     - slot_was_set:
#       - candidate_experience: senior
#     - intent: confirm_level_of_experience_expert
#     - slot_was_set:
#       - candidate_experience: expert
#   - action: utter_ask_candidate_characteristics
#   - intent: candidate_role 
#   - action: utter_confirmation_searching_for_candidate
#   - action: utter_random_confirmation 
#   - action: action_provide_candidate_profile
#   - action: utter_ask_job_characteristics
#   - intent: ask_candidate_characteristics
#   - action: action_provide_candidate_profile_details_llm
#   - action: utter_ask_candidate_characteristics
#   - or:
#     - intent: confirm_candidate
#     - intent: confirm_candidate_reachout
#   - action: utter_random_confirmation
#   - action: utter_help
#   - or:
#     - intent: affirm
#     - intent: deny
#   - action: utter_goodbye_candidate



# - story: Looking for a candidate dialogue type 1
#   steps:
#   - intent: greet
#   - action: utter_greet
#   - action: utter_help
#   - intent: looking_for_candidate
# ## when in place we do not need to ask for relocation
#   - action: utter_ask_inplace_or_remote
#   - intent: in_place_or_remote
#   - slot_was_set:
#     - in_place_or_remote: remote
#   - action: utter_ask_candidate_characteristics
#   - intent: candidate_role 
#   - action: utter_confirmation_searching_for_candidate
#   - action: utter_random_confirmation 
#   - action: action_provide_candidate_profile
#   - action: utter_ask_job_characteristics
#   - intent: ask_candidate_characteristics
#   - action: action_provide_candidate_profile_details_llm
#   - action: utter_ask_candidate_characteristics
#   - or:
#     - intent: confirm_candidate
#     - intent: confirm_candidate_reachout
#   - action: utter_random_confirmation
#   - action: utter_help
#   - or:
#     - intent: affirm
#     - intent: deny
#   - action: utter_goodbye_candidate


# - story: Looking for a candidate dialogue type 1
#   steps:
#   - intent: greet
#   - action: utter_greet
#   - action: utter_help
#   - intent: looking_for_candidate
#   - action: utter_ask_candidate_characteristics
#   - intent: candidate_role 
#   - action: utter_confirmation_searching_for_candidate
#   - action: utter_random_confirmation 
#   - action: action_provide_candidate_profile
#   - action: utter_ask_job_characteristics
#   - intent: ask_candidate_characteristics
#   - action: action_provide_candidate_profile_details_llm
#   - action: utter_ask_candidate_characteristics
#   - or:
#     - intent: confirm_candidate
#     - intent: confirm_candidate_reachout
#   - action: utter_random_confirmation
#   - action: utter_help
#   - or:
#     - intent: affirm
#     - intent: deny
#   - action: utter_goodbye_candidate


# - story: The user made a mistake in describing the candidate profile
#   steps:
#   - intent: greet
#   - action: utter_greet
#   - action: utter_help
#   - intent: looking_for_candidate
#   - action: utter_ask_candidate_characteristics
#   - intent: candidate_role 
#   - action: utter_confirmation_searching_for_candidate
#   - action: utter_random_confirmation
#   - action: action_provide_candidate_profile
#   - intent: go_back_to_candidate_role


# - story: Go back to describing the candidate profile
#   steps:
#   - intent: go_back_to_candidate_role
#   - action: utter_ask_candidate_characteristics
#   - intent: candidate_role 
#   - action: utter_confirmation_searching_for_candidate
#   - action: utter_random_confirmation
#   - action: action_provide_candidate_profile
#   - intent: ask_candidate_characteristics
#   - action: action_provide_candidate_profile_details_llm
#   - action: utter_ask_candidate_characteristics
#   - or:
#     - intent: confirm_candidate
#     - intent: confirm_candidate_reachout
#   - action: utter_random_confirmation
#   - action: utter_help
#   - or:
#     - intent: affirm
#     - intent: deny
#   - action: utter_goodbye_candidate




# Find candidates with specific skills for a 
# given job


